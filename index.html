<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Next Altris Shuttle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap');

  :root {
    --brand: #0f122b;         /* midnight */
    --accent: #ffcb45;        /* gold */
    --accent-2: #ff6ea1;      /* pop pink */
    --bg: #070915;
    --card: rgba(255,255,255,0.08);
    --stroke: rgba(255,255,255,0.08);
    --text: #e8ecff;
    font-family: 'Space Grotesk', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }

  html,body{
    margin:0; padding:0;
    background: radial-gradient(circle at 20% 20%, rgba(255,110,161,0.15), transparent 32%),
                radial-gradient(circle at 80% 15%, rgba(255,203,69,0.18), transparent 35%),
                linear-gradient(135deg, #0a0c1c 0%, #0b0f26 40%, #101735 100%);
    color:var(--text);
    min-height:100vh;
  }

  .wrapper{max-width:760px;margin:auto;padding:2.75rem 1.5rem 3.5rem;position:relative;overflow:hidden;}
  .wrapper::before,.wrapper::after{
    content:"";position:absolute;inset:-120px auto auto -120px;width:260px;height:260px;border-radius:50%;
    background:radial-gradient(circle, rgba(255,203,69,0.3) 0%, rgba(255,203,69,0) 70%);
    filter:blur(2px);opacity:.5;
  }
  .wrapper::after{inset:auto -140px -140px auto;background:radial-gradient(circle, rgba(255,110,161,0.25) 0%, rgba(255,110,161,0) 70%);}

  h1{font-size:clamp(1.8rem,4.5vw,2.6rem);margin:.25em 0 .15em;letter-spacing:-0.01em;}
  h2{font-size:1.15rem;margin:.5em 0 .25em;color:var(--accent);letter-spacing:.6px;font-weight:700;text-transform:uppercase;}

  .hero{
    position:relative;
    padding:1.2rem 1.25rem 1.35rem;
    background:linear-gradient(135deg, rgba(255,203,69,0.08), rgba(255,110,161,0.08));
    border:1px solid var(--stroke);
    border-radius:18px;
    backdrop-filter:blur(10px);
    box-shadow:0 16px 40px rgba(0,0,0,0.35);
  }
  .hero__eyebrow{
    display:inline-flex;
    align-items:center;
    gap:.4rem;
    padding:.35rem .7rem;
    border-radius:999px;
    background:rgba(255,255,255,0.08);
    font-weight:700;
    color:var(--accent);
    letter-spacing:.04em;
    text-transform:uppercase;
    font-size:.85rem;
  }
  .hero__eyebrow::before{content:"✨";}
  .hero__lede{color:rgba(232,236,255,0.78);margin:.35rem 0 0;font-size:1rem;line-height:1.45;}
  .hero__year{color:var(--accent-2);font-weight:700;}

  #status{
    margin:1rem 0 0;
    padding:.85rem 1rem;
    border-radius:12px;
    background:rgba(255,255,255,0.05);
    border:1px solid var(--stroke);
    color:rgba(232,236,255,0.9);
  }

  #cards{margin-top:1.4rem;}
  .card{
    background:var(--card);
    border-radius:16px;
    padding:1.4rem 1.6rem;
    box-shadow:0 16px 48px rgba(0,0,0,0.35);
    border:1px solid var(--stroke);
    position:relative;
    overflow:hidden;
    backdrop-filter:blur(8px);
    margin-bottom:1.4rem;
  }
  .card::after{
    content:"";
    position:absolute;inset:0;
    background:radial-gradient(circle at 20% 20%, rgba(255,203,69,0.12), transparent 35%),
               radial-gradient(circle at 80% 30%, rgba(255,110,161,0.12), transparent 35%);
    pointer-events:none;
    opacity:.9;
  }
  .time{font-size:2.35rem;font-weight:700;letter-spacing:.01em;}
  .badge{
    display:inline-flex;
    align-items:center;
    gap:.45rem;
    margin-top:.1rem;
    padding:.45rem .8rem;
    border-radius:999px;
    background:rgba(255,203,69,0.12);
    border:1px solid rgba(255,203,69,0.4);
    color:#ffe9b1;
    font-weight:600;
    font-size:.95rem;
  }
  .badge::before{content:"\25CF";font-size:.75rem;color:var(--accent);}

  details.schedule{margin-top:.8rem;font-size:.95rem;position:relative;z-index:1;color:rgba(232,236,255,0.92);}
  details.schedule summary{cursor:pointer;color:var(--text);font-weight:700;}
  details.schedule ul{margin:.6rem 0 0;padding-left:1.1rem;line-height:1.55;}
  details.schedule li{margin:.08rem 0;}

  .sky{display:flex;align-items:center;justify-content:flex-end;margin-top:2.5rem;font-size:.9rem;color:rgba(232,236,255,0.7);gap:.5rem;}
  .sky img{width:84px;margin-left:.5rem}
  .sky a{
   color: var(--accent);
   font-weight: 700;
   text-decoration: none;
  }
  .quiet{font-style:italic;color:rgba(232,236,255,0.78);}

  .confetti {
    position:absolute;inset:0;pointer-events:none;overflow:hidden;border-radius:20px;
  }
  .confetti span {
    position:absolute;width:6px;height:16px;border-radius:3px;
    background:var(--accent);
    opacity:.7;
    filter:drop-shadow(0 0 4px rgba(255,203,69,0.6));
    animation: float 12s linear infinite;
  }
  .confetti span:nth-child(3n){background:var(--accent-2);}
  .confetti span:nth-child(4n){background:#7cd8ff;}

  @keyframes float{
    0%{transform:translate3d(0,-20px,0) rotate(0deg);opacity:0;}
    10%{opacity:.9;}
    100%{transform:translate3d(0,520px,0) rotate(220deg);opacity:0;}
  }

  @media (max-width:540px){
    .card{padding:1.2rem 1.25rem;}
    .time{font-size:2rem;}
    .hero{padding:1rem 1.05rem;}
  }
</style>
</head>
<body>
<div class="wrapper">
  <div class="hero">
    <div class="confetti" aria-hidden="true"></div>
    <div class="hero__eyebrow">New Year 2026</div>
    <h1>Altris Residence — Next Shuttle</h1>
    <p class="hero__lede">Ring in <span class="hero__year">2026</span> with reliable rides between Altris and LRT Sri Rampai. Keep the celebrations flowing—no guesswork on the next shuttle.</p>
  </div>

  <div id="status" class="quiet"></div>

  <div id="cards"></div>
  <div class="sky">
    Powered&nbsp;by&nbsp;
    <a href="https://www.skymart.com.my" target="_blank" rel="noopener">SkyMart</a>
  </div>

</div>

<script>
/* ---------- CONFIG ------------------------------------------------------- */
const outbound = [  // Altris ➜ LRT Sri Rampai
  "07:00","07:30","08:00","08:30","09:00","09:30",
  "12:00","12:30","15:00","17:00","17:30","18:00","18:30"
];
const inbound = [   // LRT Sri Rampai ➜ Altris
  "08:15","08:45","09:15","09:45","12:15","12:45",
  "15:15","17:15","17:45","18:15","18:45","19:15","19:45"
];
const daysActive = [1,2,3,4,5];            // 0 = Sunday … 6 = Saturday
const publicHolidays = [                   // Kuala Lumpur public holidays (2026)
  "2026-01-01", // New Year's Day
  "2026-02-01", // Thaipusam
  "2026-02-02", // Federal Territory Day
  "2026-02-17", // Chinese New Year
  "2026-02-18", // Chinese New Year Holiday
  "2026-03-07", // Nuzul Al-Quran Day
  "2026-03-21", // Hari Raya Aidilfitri
  "2026-03-22", // Hari Raya Aidilfitri Holiday
  "2026-03-23", // Hari Raya Aidilfitri Holiday (Regional)
  "2026-05-01", // Labour Day
  "2026-05-27", // Hari Raya Haji
  "2026-05-31", // Wesak Day
  "2026-06-01", // Birthday of SPB Yang di Pertuan Agong
  "2026-06-17", // Awal Muharram
  "2026-08-25", // Maulidur Rasul
  "2026-08-31", // National Day
  "2026-09-16", // Malaysia Day
  "2026-11-08", // Deepavali
  "2026-11-09", // Deepavali (in lieu)
  "2026-12-25"  // Christmas Day
];
/* ------------------------------------------------------------------------ */

const cardsEl = document.getElementById("cards");
const statusEl = document.getElementById("status");
const confettiEl = document.querySelector(".confetti");

function parseToday(timeHHMM){
  const [hh,mm] = timeHHMM.split(":").map(Number);
  const d = new Date();
  d.setHours(hh,mm,0,0);
  return d;
}
function minutesDiff(a,b){ return Math.round((b - a)/60000); }
function isHoliday(date){ return publicHolidays.includes(date.toLocaleDateString("en-CA")); }
function isServiceDay(date){
  return daysActive.includes(date.getDay()) && !isHoliday(date);
}
function parseOn(dateObj, timeHHMM){
  const [hh,mm] = timeHHMM.split(":").map(Number);
  const d = new Date(dateObj);
  d.setHours(hh,mm,0,0);
  return d;
}
function nextServiceDay(fromDate){
  const d = new Date(fromDate);
  d.setHours(12,0,0,0); // normalize away from midnight
  do {
    d.setDate(d.getDate()+1);
  } while(!isServiceDay(d));
  return d;
}

function formatMinutes(mins){
  const h = Math.floor(mins / 60);
  const m = mins % 60;
  const parts = [];
  if(h) parts.push(h + "h");
  if(m) parts.push(m + (m === 1 ? "min" : "mins"));
  if(!h && !m) parts.push("0min");
  return parts.join(" ");
}

function nextTrip(schedule){
  const now = new Date();
  const today = new Date(now);
  for(const t of schedule){
    const when = parseOn(today, t);
    if(when > now) return {time:t, date:when};
  }
  // none left today -> find next service day (skipping weekends/holidays)
  const nextDay = nextServiceDay(now);
  const nextTime = parseOn(nextDay, schedule[0]);
  const dayDiff = Math.round((new Date(nextDay).setHours(0,0,0,0) - new Date(today).setHours(0,0,0,0)) / 86400000);
  const label = dayDiff === 1 ? `${schedule[0]} (tomorrow)` : `${schedule[0]} (${nextTime.toLocaleDateString("en-CA")})`;
  return {time:label, date:nextTime};
}

function remainingTrips(schedule){
  const now = new Date();
  return schedule.filter(t => parseToday(t) > now);
}

function refresh(){
  const now = new Date();

  // Kuala Lumpur public holiday guard
  if(isHoliday(now)){
    statusEl.textContent = "No shuttle on Kuala Lumpur public holidays.";
    cardsEl.innerHTML = "";
    return;
  }

  // Week-day guard
  if(!daysActive.includes(now.getDay())){
    statusEl.textContent = "The shuttle runs Monday–Friday only. Enjoy your weekend!";
    cardsEl.innerHTML = "";
    return;
  } else {
    statusEl.textContent = "";
  }

  cardsEl.innerHTML = "";   // clear

  [
    {title:"Altris → LRT Sri Rampai", schedule:outbound},
    {title:"LRT Sri Rampai → Altris", schedule:inbound}
  ].forEach(({title,schedule})=>{
    const {time,date} = nextTrip(schedule);
    const mins = minutesDiff(now,date);
    const remaining = remainingTrips(schedule);
    const listItems = remaining.length
      ? remaining.map(t => `<li>${t}</li>`).join("")
      : '<li>No more trips today</li>';

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h2>${title}</h2>
      <div class="time">${time}</div>
      <div class="badge">${mins===0 ? "Now" : formatMinutes(mins)+"&nbsp;away"}</div>
      <details class="schedule">
        <summary>Today's remaining trips</summary>
        <ul>${listItems}</ul>
      </details>
    `;
    cardsEl.appendChild(card);
  });
}

refresh();
setInterval(refresh, 60000);   // update every minute

// Sprinkle celebratory confetti for the 2026 theme
if(confettiEl){
  const pieces = 36;
  for(let i=0;i<pieces;i++){
    const span = document.createElement("span");
    span.style.left = Math.random()*100 + "%";
    span.style.animationDelay = (Math.random()*6) + "s";
    span.style.animationDuration = (10 + Math.random()*6) + "s";
    confettiEl.appendChild(span);
  }
}
</script>
</body>
</html>
